# [Task Name] - 上下文

> **用途**: AI上下文恢复和进度追踪（**最重要**）  
> **更新频率**: 每完成一个milestone就更新  
> **上次更新**: YYYY-MM-DD HH:MM

---

## ⚡ SESSION PROGRESS（重要！）

### ✅ COMPLETED（已完成）

#### ✅ [YYYY-MM-DD HH:MM] Task 1.1: [任务名称]
- **文件**: `path/to/file.py`
- **提交**: commit abc123（如已提交）
- **说明**: [完成了什么，关键改动]
- **验证**: [如何验证已完成]

#### ✅ [YYYY-MM-DD HH:MM] Task 1.2: [任务名称]
- **文件**: `path/to/file2.py`
- **说明**: [说明]

---

### 🟡 IN PROGRESS（进行中）

#### 🟡 Task 2.1: [任务名称]
- **文件**: `path/to/file3.py`
- **进度**: 70%
- **已完成**:
  - [x] 子任务1
  - [x] 子任务2
- **待完成**:
  - [ ] 子任务3 - 添加验证逻辑
  - [ ] 子任务4 - 编写测试
- **下一步**: [具体下一步操作]
- **预计完成**: [时间]

---

### ⏳ PENDING（待处理）

- ⏳ **Task 2.2**: [任务名称] - [简要说明]
- ⏳ **Task 3.1**: [任务名称] - [简要说明]
- ⏳ **Task 3.2**: [任务名称] - [简要说明]

---

### ⚠️ BLOCKERS（阻塞）

#### ⚠️ [阻塞问题1]
- **日期**: YYYY-MM-DD
- **描述**: [详细描述问题]
- **原因**: [为什么阻塞]
- **影响**: [影响哪些任务]
- **解决方案**: [计划如何解决]
- **预计解决时间**: [时间]

---

## 📁 关键文件

### path/to/file1.py
- **职责**: [文件的职责]
- **状态**: ✅ 完成 / 🟡 进行中 (XX%) / ⏳ 待开始
- **关键函数/类**:
  - `function1()`: [说明，当前状态]
  - `function2()`: [说明，TODO: 添加某功能]
- **依赖**: [依赖哪些其他文件]
- **被依赖**: [被哪些文件依赖]

### path/to/file2.py
- **职责**: [文件的职责]
- **状态**: ✅ 完成
- **关键函数/类**:
  - `Class1`: [说明]
  - `method1()`: [说明]

### path/to/file3.py
- **职责**: [文件的职责]
- **状态**: 🟡 进行中 (70%)
- **已完成**: 基础结构和核心逻辑
- **待完成**: 错误处理和边界情况
- **下一步**: 添加try-catch块

---

## 🎯 关键决策

### Decision 1: [决策标题]
- **日期**: YYYY-MM-DD
- **决策者**: [谁做的决定]
- **决策**: [具体决策内容]
- **原因**: [为什么这样决策]
- **影响**: [影响哪些部分]
- **备选方案**: 
  - 方案B: [说明为何未选]
  - 方案C: [说明为何未选]

### Decision 2: [决策标题]
- **日期**: YYYY-MM-DD
- **决策**: [具体决策]
- **原因**: [原因]

---

## ⚠️ 错误记录（重要！避免重复）

### ERROR-001: [错误标题]
- **日期**: YYYY-MM-DD
- **错误**: [做了什么错事]
- **后果**: [导致了什么问题，如：测试失败、功能不正常]
- **根因**: [为什么会犯这个错误]
- **教训**: [应该怎么做]
- **⚠️ AI注意**: [明确警告AI不要重复这个错误]

**示例**:
```
ERROR-001: 忘记更新依赖项
- 日期: 2025-11-08
- 错误: 添加新功能时使用了新库，但忘记在requirements.txt中添加
- 后果: CI测试失败
- 根因: 本地环境已安装该库，未察觉依赖缺失
- 教训: 添加新导入后，立即检查并更新requirements.txt
- ⚠️ AI注意: 每次添加新的import语句，必须检查requirements.txt
```

### ERROR-002: [错误标题]
- ...

---

## 🔒 技术约束

### 已知约束
1. **[约束1]**: [说明，如：Python版本必须≥3.9]
2. **[约束2]**: [说明，如：不能使用某个库]
3. **[约束3]**: [说明]

### 依赖版本
- Python: X.X+
- FastAPI: X.XX+
- [其他依赖]: X.X+

### 性能要求（如适用）
- 响应时间: ≤XXXms
- 吞吐量: ≥XXX req/s
- 内存使用: ≤XXX MB

---

## 🔗 模块关系

### 上游依赖
- **[模块A]**: [提供什么，如何使用]
- **[模块B]**: [提供什么]

### 下游消费
- **[模块C]**: [使用我们的什么功能]
- **[模块D]**: [使用什么]

### 数据流
```
[输入] → [本模块处理] → [输出]
```

---

## 📝 关键代码片段

### 代码片段1: [标题]
```python
# 重要代码片段（已实现或需要实现）
def important_function():
    # 关键逻辑
    pass
```

**说明**: [这段代码的作用]

### 代码片段2: [标题]
```python
# ...
```

---

## 🚀 Quick Resume（快速恢复）

> **如果AI需要快速恢复任务**，请执行以下步骤：

### 1. 阅读顺序
1. 本文件的SESSION PROGRESS
2. plan.md的Phase X（当前Phase）
3. tasks.md的Task X.X（当前任务）
4. 关键文件（见上方）

### 2. 当前状态一句话
[一句话总结当前在做什么，进度如何]

示例：
```
正在实现用户认证功能的JWT token生成逻辑（Task 2.1），
已完成token生成函数，待添加过期时间验证。
文件：modules/auth/core/jwt.py（70%完成）
```

### 3. 下一步行动
[明确的下一步操作]

示例：
```
1. 在jwt.py的verify_token()函数中添加过期时间检查
2. 编写unit test验证过期token被正确拒绝
3. 更新context.md标记Task 2.1为完成
```

### 4. 注意事项
- ⚠️ [注意事项1]
- ⚠️ [注意事项2]

---

## 📊 统计信息

### 进度统计
- 总任务数: X
- 已完成: Y (YY%)
- 进行中: Z
- 待处理: W
- 阻塞: 0

### 文件统计
- 已修改文件: X个
- 新增文件: Y个
- 待修改文件: Z个

### 测试统计
- 单元测试: X个 (覆盖率 YY%)
- 集成测试: Y个

---

## 💡 想法和备注

### 未来改进
- [改进想法1]
- [改进想法2]

### 临时备注
- [需要记录但暂时没地方放的内容]

---

## 📚 相关资源

- **Plan**: [plan.md](plan.md)
- **Tasks**: [tasks.md](tasks.md)
- **设计文档**: [路径]
- **契约文档**: [路径]
- **相关Issue**: [链接]

