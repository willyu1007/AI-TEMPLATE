# 缺陷管理（Bugs）

## 目标
系统化跟踪和管理模块缺陷，积累问题解决经验，持续改进代码质量。

## 适用场景
- 记录已知缺陷
- 跟踪修复进度
- 复盘和经验总结

## 使用说明
1. 发现缺陷后立即记录
2. 按严重程度分类和优先级排序
3. 修复后移至"已修复"章节
4. 定期进行缺陷复盘

---

## 已知缺陷

### 当前无活跃缺陷 ✅

### 缺陷记录模板
使用以下格式记录新缺陷：

```markdown
- [ ] **BUG-XXX**: [缺陷简短描述]
  - **发现日期**: YYYY-MM-DD
  - **影响**: Critical/High/Medium/Low
  - **复现步骤**:
    1. [步骤1]
    2. [步骤2]
    3. [步骤3]
  - **期望行为**: [应该如何]
  - **实际行为**: [实际发生了什么]
  - **影响范围**: [影响的功能/用户]
  - **临时方案**: [规避措施，如有]
  - **根因分析**: [初步分析，如已知]
  - **优先级**: P0/P1/P2/P3
```

---

## 已修复缺陷

### BUG-000: 示例 - 文档链接失效 ✅
- **修复时间**: 2025-11-04
- **影响**: Low
- **修复方案**: 更新所有文档链接为相对路径
- **验证**: 所有链接可访问
- **提交**: commit abc1234

---

## 缺陷复盘

### BUG-000 复盘报告（示例）

#### 问题描述
文档重构后，部分文档中的链接失效，导致用户无法访问相关文档。

#### 根因分析

**直接原因**：
- 文档重构时未更新所有引用
- 使用了绝对路径而非相对路径

**深层原因**：
- 缺少链接有效性自动检查
- 文档变更时无检查清单

#### 影响范围评估
| 维度 | 影响程度 | 说明 |
|------|---------|------|
| 用户体验 | 中 | 部分文档无法访问 |
| 功能影响 | 无 | 不影响核心功能 |
| 数据影响 | 无 | 无数据丢失或错误 |
| 安全影响 | 无 | 无安全问题 |

**影响用户数**: 约 5 人  
**持续时间**: 2 天  
**严重程度**: Low

#### 解决时间线
| 时间 | 事件 |
|------|------|
| 2025-11-02 10:00 | 用户报告链接失效 |
| 2025-11-02 11:00 | 确认问题并定位根因 |
| 2025-11-02 14:00 | 修复所有链接 |
| 2025-11-02 15:00 | 验证修复并部署 |
| 2025-11-04 09:00 | 添加自动化检查 |

**总耗时**: 5 小时（发现到修复）  
**修复耗时**: 3 小时

#### 改进措施

**已实施**：
1. ✅ 增加 CI 链接检查（`make doc_style_check`）
2. ✅ 建立文档变更清单
3. ✅ 使用相对路径替代绝对路径

**计划中**：
1. ⏸️ 定期审查文档链接（每月）
2. ⏸️ 添加文档链接自动化测试
3. ⏸️ 更新文档维护指南

#### 经验教训

**技术层面**：
- 文档也需要测试和验证
- 重构时需要全面影响分析
- 自动化检查可以防止人为疏忽

**流程层面**：
- 变更需要有检查清单
- 需要建立文档维护规范
- 用户反馈渠道很重要

**预防措施**：
1. 所有重构必须运行 `make dev_check`
2. 文档链接使用相对路径
3. PR 中包含文档变更检查

---

## 缺陷统计

### 当前月度统计（2025-11）
| 指标 | 数值 |
|------|------|
| 活跃缺陷 | 0 |
| 新增缺陷 | 0 |
| 已修复 | 0 |
| 平均修复时间 | N/A |

### 按严重程度分类
| 严重程度 | 活跃 | 已修复 |
|---------|------|--------|
| Critical (P0) | 0 | 0 |
| High (P1) | 0 | 0 |
| Medium (P2) | 0 | 0 |
| Low (P3) | 0 | 1 |

---

## 缺陷趋势

### 月度趋势
| 月份 | 新增 | 修复 | 累计活跃 |
|------|------|------|---------|
| 2025-11 | 0 | 0 | 0 |
| 2025-10 | 1 | 1 | 0 |

### 分析
- ✅ 缺陷数量稳定，质量良好
- ✅ 修复及时，无积压
- ⚠️ 样本量小，需继续观察

---

## 缺陷处理流程

### 1. 发现缺陷
```
# 记录到 BUGS.md
vim modules/example/BUGS.md

# 创建 Issue（如使用 GitHub）
gh issue create --title "BUG: ..." --label bug
```

## 2. 分类和优先级
| 严重程度 | 响应时间 | 修复时间 |
|---------|---------|---------|
| P0 (Critical) | 立即 | < 4 小时 |
| P1 (High) | < 2 小时 | < 1 天 |
| P2 (Medium) | < 1 天 | < 1 周 |
| P3 (Low) | < 1 周 | 下个版本 |

### 3. 修复和验证
```
# 1. 创建修复分支
git checkout -b fix/bug-xxx

# 2. 修复代码
# ... 编写修复代码 ...

# 3. 添加回归测试
# ... 编写测试防止复现 ...

# 4. 验证修复
pytest tests/example/
make dev_check

# 5. 提交 PR
git commit -m "fix(example): 修复 BUG-XXX"
```

## 4. 复盘和改进
```
# 修复完成后进行复盘
# 更新 BUGS.md 的复盘章节
```

---

## 相关文档
- **测试计划**: `TEST_PLAN.md`
- **变更日志**: `CHANGELOG.md`
- **进度跟踪**: `PROGRESS.md`
- **开发计划**: `plan.md`

