meta:
  table_name: runs
  description: "AI agent run history"
  owner: "platform"
  created_at: "2025-11-07"
  migration_version: "001"
table:
  name: runs
  schema: public
  columns:
    - name: run_id
      type: UUID
      constraints: [PRIMARY KEY]
      default: gen_random_uuid()
      nullable: false
      description: "Unique identifier"
    - name: agent
      type: TEXT
      nullable: false
      description: "Agent name"
    - name: prompt_hash
      type: TEXT
      nullable: true
      description: "Prompt hash"
    - name: tool_version
      type: TEXT
      nullable: true
      description: "Tool version"
    - name: latency_ms
      type: INTEGER
      nullable: true
      description: "Latency in milliseconds"
    - name: created_at
      type: TIMESTAMPTZ
      default: NOW()
      nullable: false
      description: "Creation timestamp"
    - name: updated_at
      type: TIMESTAMPTZ
      default: NOW()
      nullable: false
      description: "Update timestamp"
  indexes:
    - name: idx_runs_agent
      columns: [agent]
      description: "Query by agent"
    - name: idx_runs_created_at
      columns: ["created_at DESC"]
      description: "Recent runs"
governance:
  sensitivity: low
  retention_days: 90
  backup_required: true
  access_control:
    - role: app_service
      permissions: [SELECT, INSERT, UPDATE]
    - role: analytics
      permissions: [SELECT]
performance:
  estimated_rows: 1000000
  growth_rate: 10000
migrations:
  up: "../../migrations/001_example_create_runs_table_up.sql"
  down: "../../migrations/001_example_create_runs_table_down.sql"
example_queries:
  - description: "Latest 10 runs"
    sql: |
      SELECT * FROM runs ORDER BY created_at DESC LIMIT 10;
  - description: "Run count per agent"
    sql: |
      SELECT agent, COUNT(*) FROM runs GROUP BY agent ORDER BY COUNT(*) DESC;
